<IfModule mod_rewrite.c>
    RewriteEngine On

    # Serve existing files/directories directly
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Rewrite everything else to index.php
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>

# Block access to hidden files and directories
<IfModule mod_rewrite.c>
    RewriteCond %{REQUEST_URI} "!(^|/)\.well-known/([^./]+./)+" [NC]
    RewriteCond %{REQUEST_URI} "(^|/)\." [NC]
    RewriteRule .* - [F,L]
</IfModule>
